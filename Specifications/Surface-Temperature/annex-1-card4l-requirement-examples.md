<!--lint disable-->
# Annex 1 – CARD4L Requirement Examples (Surface Temperature)
## General Metadata

|**#**|**Item**|**Example 1**|**Example 2**|
| :-: | :-: | :-: | :-: |
|**1.1**|**Traceability**|<p>Example of measurement traceability in metadata: </p><p><band add\_offset="0.000000" category="image" data\_type="INT16" fill\_value="-9999" name="ST" nlines="5000" nsamps="5000" product="st" scale\_factor="0.100000"</p><p>`    `<short\_name>LC08ST</short\_name></p><p>`    `<long\_name>Surface Temperature</long\_name></p><p>`    `<file\_name>ST</file\_name></p><p>`    `<pixel\_size units="meters" x="30" y="30"/></p><p>`    `<resample\_method>none</resample\_method></p><p>`    `<data\_units>temperature (kelvin)</data\_units></p><p>`    `<valid\_range max="3730.000000" min="1500.000000"/></p><p>`    `<app\_version>st\_1.3.0</app\_version></p><p>`    `<production\_date>2018-11-30T04:47:38Z</production\_date></p><p></band></p><p></p><p>Example of measurement uncertainty in metadata:</p><p><band category="qa" data\_type="INT16" fill\_value="-9999" name="STQA" nlines="5000" nsamps="5000" product="st\_qa" scale\_factor="0.010000" source="toa\_refl"></p><p>`    `<short\_name>LC08STQA</short\_name></p><p>`    `<long\_name>Surface temperature quality band</long\_name></p><p>`    `<file\_name>STQA</file\_name></p><p>`    `<pixel\_size units="meters" x="30" y="30"/></p><p>`    `<resample\_method>none</resample\_method></p><p>`    `<data\_units>temperature (kelvin)</data\_units></p><p>`    `<valid\_range max="32767.000000" min="0.000000"/></p><p>`    `<app\_version>st\_1.3.0</app\_version></p><p>`    `<production\_date>2018-11-30T04:47:38Z</production\_date></p><p></band></p>|NA|
|**1.2**|**Metadata Machine Readability**|NA|NA|
|**1.3**|**Data Collection Time**|<p>Example of scene center time (UTC):</p><p><scene\_center\_time>17:23:57.201686Z</scene\_center\_time></p>|The granule start and end times are contained in the XML metadata:<br>`     	`<metadataObject ID="acquisitionPeriod" classification="DESCRIPTION" category="DMD"><br>`        	`<metadataWrap mimeType="text/xml" vocabularyName="Sentinel-SAFE" textInfo="Acquisition Period"><br>`           	`<xmlData><br>`              	`<sentinel-safe:acquisitionPeriod><br>`                 	`<sentinel-safe:startTime>2018-10-07T05:04:50.425838Z</sentinel-safe:startTime><br>`                 	`<sentinel-safe:stopTime>2018-10-07T05:07:50.425838Z</sentinel-safe:stopTime><br>`              	`</sentinel-safe:acquisitionPeriod><br>`           	`</xmlData><br>`        	`</metadataWrap><br>`     	`</metadataObject><br><br>Per pixel times are derived using information from the "time\_in.nc" and “indices\_in.nc” datafiles following a prescribed recipe|
|**1.4**|**Geographical Area**|<p>Example of the bounding coordinates in decimal degrees (WGS84):</p><p><bounding\_coordinates></p><p>`    `<west>-99.9109607425</west></p><p>`    `<east>-98.0134952569</east></p><p>`    `<north>43.3609828699</north></p><p>`    `<south>41.9778528562</south></p><p></bounding\_coordinates></p><p></p><p>Example of the corner points in the map projection system (Albers):</p><p><corner\_point location="UL" x="-315585.000000" y="2264805.000000"/></p><p><corner\_point location="LR" x="-165585.000000" y="2114805.000000"/></p>|NA|
|**1.5**|**Coordinate Reference System**|<p>Example of the projected coordinate system info:</p><p></p><p><projection\_information datum="WGS84" projection="AEA" units="meters"></p>|NA|
|**1.6**|**Map Projection**|<p>Example: </p><p><projection\_information datum="WGS84" projection="AEA" units="meters"></p><p>`    `<corner\_point location="UL" x="-315585.000000" y="2264805.000000"/></p><p>`    `<corner\_point location="LR" x="-165585.000000" y="2114805.000000"/></p><p>`    `<grid\_origin>UL</grid\_origin></p><p>`    `<albers\_proj\_params></p><p>`        `<standard\_parallel1>29.500000</standard\_parallel1></p><p>`        `<standard\_parallel2>45.500000</standard\_parallel2></p><p>`        `<central\_meridian>-96.000000</central\_meridian></p><p>`        `<origin\_latitude>23.000000</origin\_latitude></p><p>`        `<false\_easting>0.000000</false\_easting></p><p>`        `<false\_northing>0.000000</false\_northing></p><p>`    `</albers\_proj\_params></p><p></projection\_information></p>|NA|
|**1.7**|**Geometric Correction Source**|<p>Example of elevation source:</p><p><elevation\_source>GLS2000</elevation\_source></p>|The XML wrapper provides the source of the geometric calibration:<br><br><sentinel-safe:resource name="S3A\_SL\_1\_GEC\_AX\_20160216T000000\_20991231T235959\_20180202T120000\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_MPC\_O\_AL\_007.SEN3" role="SLSTR Geometric Calibration Data File"><br>`   `<sentinel-safe:processing name="AdfProcessing"><br>`  	`<sentinel-safe:facility name="ESA Mission Performance Coordinating Centre (MPC)" organisation="ESA Mission Performance Coordinating Centre" site="Sophia Antipolis" country="France"><br>`     	`<sentinel-safe:hardware name="OPE"/><br>`         `<sentinel-safe:software name="ADC" version="1.0"/><br>`      `</sentinel-safe:facility><br>`   `</sentinel-safe:processing><br></sentinel-safe:resource><br> |
|**1.8**|**Geometric Accuracy of the Data**|<p>Example:</p><p><geometric\_rmse\_model>9.021</geometric\_rmse\_model></p><p><geometric\_rmse\_model\_x>6.864</geometric\_rmse\_model\_x></p><p><geometric\_rmse\_model\_y>5.854</geometric\_rmse\_model\_y></p>|NA|
|**1.9**|**Instrument**|<p>Example:</p><p><satellite>LANDSAT\_8</satellite></p><p><instrument>OLI/TIRS\_Combined</instrument></p>|<p>The XML wrapper provides the instrument details:</p><p></p><p>`         `<metadataObject ID="platform" classification="DESCRIPTION" category="DMD"></p><p>`            `<metadataWrap mimeType="text/xml" vocabularyName="Sentinel-SAFE" textInfo="Platform Description"></p><p>`               `<xmlData></p><p>`                  `<sentinel-safe:platform></p><p>`                     `<sentinel-safe:nssdcIdentifier>2016-011A</sentinel-safe:nssdcIdentifier></p><p>`                     `<sentinel-safe:familyName>Sentinel-3</sentinel-safe:familyName></p><p>`                     `<sentinel-safe:number>A</sentinel-safe:number></p><p>`                     `<sentinel-safe:instrument></p><p>`                        `<sentinel-safe:familyName abbreviation="SLSTR">Sea and Land Surface Temperature Radiometer</sentinel-safe:familyName></p><p>`                        `<sentinel-safe:mode identifier="EO">Earth Observation</sentinel-safe:mode></p><p>`                     `</sentinel-safe:instrument></p><p>`                  `</sentinel-safe:platform></p><p>`               `</xmlData></p><p>`            `</metadataWrap></p><p>`         `</metadataObject></p>|
|**1.10**|**Spectral Bands**|NA|NA|
|**1.11**|**Sensor Calibration**|<p>Example:</p><p><cpf\_name>LC08CPF\_20180101\_20180331\_01.02</cpf\_name></p>|NA|
|**1.12**|**Radiometric Accuracy**|NA|NA|
|**1.13**|**Algorithms**|<p>Example for Surface Temperature algorithm version:</p><p><app\_version>st\_1.3.0</app\_version></p>|NA|
|**1.14**|**Auxiliary Data**|NA|All Auxiliary Datafiles (ADFs) are listed in the XML wrapper:<br>`                       	`<sentinel-safe:resource name="S3\_\_SL\_2\_LSTBAX\_20000101T000000\_20991231T235959\_20151214T120000\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_MPC\_O\_AL\_001.SEN3" role="SLSTR LST biome data file" version="06.16"><br>`                       	`<sentinel-safe:resource name="S3\_\_SL\_2\_LSTVAX\_20000101T000000\_20991231T235959\_20151214T120000\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_MPC\_O\_AL\_001.SEN3" role="SLSTR LST vegetation fraction data file" version="06.16"><br>`                       	`<sentinel-safe:resource name="S3\_\_SL\_2\_LSTWAX\_20000101T000000\_20991231T235959\_20151214T120000\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_MPC\_O\_AL\_001.SEN3" role="SLSTR LST water vapour data file" version="06.16">|
|**1.15**|**Processing Chain Provenance**|NA|Processing chain provenance information is stored in the XML wrapper under the following tag:<br>`     	`<metadataObject ID="processing" classification="PROVENANCE" category="PDI">|
|**1.16**|**Data Access**|NA|NA|
|**1.17**|**Overall Data Quality**|NA|Overall data quality information is stored in the XML wrapper under the following tag:<br>`     	`<metadataObject ID="measurementQualityInformation" classification="DESCRIPTION" category="DMD">|


## Per-Pixel Metadata

|**#**|**Item**|**Example 1**|**Example 2**|
| :-: | :-: | :-: | :-: |
|**2.1**|**Metadata Machine Readability**|NA|NA|
|**2.2**|**No Data**|<p>Example of the fill\_value specified for each band in metadata:</p><p><band add\_offset="0.000000" category="image" data\_type="INT16" fill\_value="-9999" name="ST" nlines="5000" nsamps="5000" product="st" scale\_factor="0.100000"</p><p>`    `<short\_name>LC08ST</short\_name></p><p>`    `<long\_name>Surface Temperature</long\_name></p><p>`    `<file\_name>ST</file\_name></p><p>`    `<pixel\_size units="meters" x="30" y="30"/></p><p>`    `<resample\_method>none</resample\_method></p><p>`    `<data\_units>temperature (kelvin)</data\_units></p><p>`    `<valid\_range max="3730.000000" min="1500.000000"/></p><p>`    `<app\_version>st\_1.3.0</app\_version></p><p>`    `<production\_date>2018-11-30T04:47:38Z</production\_date></p><p></band></p>|<p>The "flags\_in.nc" datafile contains per-pixel information on "no / bad data through saturation / incomplete testing etc". The following field has an "unfilled" flag:<br><br>`    	`ushort confidence\_in(rows, columns) ;<br>`            	`confidence\_in:flag\_masks = 1US, 2US, 4US, 8US, 16US, 32US, 64US, 128US, 256US, 512US, 1024US, 2048US, 4096US, 8192US, 16384US, 32768US ;<br>`            	`confidence\_in:flag\_meanings = "coastline ocean tidal land inland\_water unfilled spare spare cosmetic duplicate day twilight sun\_glint snow summary\_cloud summary\_pointing" ;</p><p></p><p></p>|
|**2.3**|**Incomplete Testing**|NA|The "flags\_in.nc" datafile contains per-pixel information on "no / bad data through saturation / incomplete testing etc". The following field has an "unfilled" flag:<br><br>`        `ushort confidence\_in(rows, columns) ;<br>`                `confidence\_in:flag\_masks = 1US, 2US, 4US, 8US, 16US, 32US, 64US, 128US, 256US, 512US, 1024US, 2048US, 4096US, 8192US, 16384US, 32768US ;<br>`                `confidence\_in:flag\_meanings = "coastline ocean tidal land inland\_water unfilled spare spare cosmetic duplicate day twilight sun\_glint snow summary\_cloud summary\_pointing”;|
|**2.4**|**Saturation**|<p>Example of RADSATQA band showing the saturation information for the thermal bands used for Surface Temperature calculation:</p><p><band category="qa" data\_type="UINT16" fill\_value="1" name="RADSATQA" nlines="5000" nsamps="5000" product="toa\_refl" source="level1"></p><p>`    `<short\_name>LC08RADSAT</short\_name></p><p>`    `<long\_name>saturation mask</long\_name></p><p>`    `<file\_name>RADSATQA</file\_name></p><p>`    `<pixel\_size units="meters" x="30" y="30"/></p><p>`    `<resample\_method>none</resample\_method></p><p>`    `<data\_units>bitmap</data\_units></p><p>`    `<bitmap\_description></p><p>`        `<bit num="0">Data Fill Flag (0 = valid data, 1 = invalid data)</bit></p><p>`        `<bit num="1">Band 1 Data Saturation Flag (0 = valid data, 1 = saturated data)</bit></p><p>`        `<bit num="2">Band 2 Data Saturation Flag (0 = valid data, 1 = saturated data)</bit></p><p>`        `<bit num="3">Band 3 Data Saturation Flag (0 = valid data, 1 = saturated data)</bit></p><p>`        `<bit num="4">Band 4 Data Saturation Flag (0 = valid data, 1 = saturated data)</bit></p><p>`        `<bit num="5">Band 5 Data Saturation Flag (0 = valid data, 1 = saturated data)</bit></p><p>`        `<bit num="6">Band 6 Data Saturation Flag (0 = valid data, 1 = saturated data)</bit></p><p>`        `<bit num="7">Band 7 Data Saturation Flag (0 = valid data, 1 = saturated data)</bit></p><p>`        `<bit num="8">N/A</bit></p><p>`        `<bit num="9">Band 9 Data Saturation Flag (0 = valid data, 1 = saturated data)</bit></p><p>`        `<bit num="10">Band 10 Data Saturation Flag (0 = valid data, 1 = saturated data)</bit></p><p>`        `<bit num="11">Band 11 Data Saturation Flag (0 = valid data, 1 = saturated data)</bit></p><p>`    `</bitmap\_description></p><p>`    `<app\_version>LaSRC\_1.3.0</app\_version></p><p>`    `<production\_date>2018-11-30T04:47:38Z</production\_date></p><p></band></p>|The "flags\_in.nc" datafile contains per-pixel information on "no / bad data through saturation / incomplete testing etc". The following field has an "unfilled" flag:<br><br>`        `ushort confidence\_in(rows, columns) ;<br>`                `confidence\_in:flag\_masks = 1US, 2US, 4US, 8US, 16US, 32US, 64US, 128US, 256US, 512US, 1024US, 2048US, 4096US, 8192US, 16384US, 32768US ;<br>`                `confidence\_in:flag\_meanings = "coastline ocean tidal land inland\_water unfilled spare spare cosmetic duplicate day twilight sun\_glint snow summary\_cloud summary\_pointing" ;|
|**2.5**|**Cloud**|<p>Example of PIXELQA showing the bit value for cloud pixels (as well as cloud and cirrus confidence):</p><p><band category="qa" data\_type="UINT16" fill\_value="1" name="PIXELQA" nlines="5000" nsamps="5000" product="level2\_qa" source="level1"></p><p>`    `<short\_name>LC08PQA</short\_name></p><p>`    `<long\_name>level-2 pixel quality band</long\_name></p><p>`    `<file\_name>PIXELQA</file\_name></p><p>`    `<pixel\_size units="meters" x="30" y="30"/></p><p>`    `<resample\_method>none</resample\_method></p><p>`    `<data\_units>quality/feature classification</data\_units></p><p>`    `<bitmap\_description></p><p>`        `<bit num="0">fill</bit></p><p>`        `<bit num="1">clear</bit></p><p>`        `<bit num="2">water</bit></p><p>`        `<bit num="3">cloud shadow</bit></p><p>`        `<bit num="4">snow</bit></p><p>`        `<bit num="5">cloud</bit></p><p>`        `<bit num="6">cloud confidence</bit></p><p>`        `<bit num="7">cloud confidence</bit></p><p>`        `<bit num="8">cirrus confidence</bit></p><p>`        `<bit num="9">cirrus confidence</bit></p><p>`        `<bit num="10">terrain occlusion</bit></p><p>`        `<bit num="11">unused</bit></p><p>`        `<bit num="12">unused</bit></p><p>`        `<bit num="13">unused</bit></p><p>`        `<bit num="14">unused</bit></p><p>`        `<bit num="15">unused</bit></p><p>`    `</bitmap\_description></p><p>`    `<app\_version>generate\_pixel\_qa\_1.6.0</app\_version></p><p>`    `<production\_date>2018-11-30T04:47:38Z</production\_date></p><p></band></p>|The "flags\_in.nc" datafile contains all the cloud masking flags<br>Three fields are relevant: i) cloud\_in; ii) confidence\_in; and iii) bayes\_in<br><br>The "cloud\_in" field contains all the individual threshold-based mask:<br>flag\_masks = 1US, 2US, 4US, 8US, 16US, 32US, 64US, 128U 	S, 256US, 512US, 1024US, 2048US, 4096US, 8192US, 16384US, 32768US ;<br>cloud\_in:flag\_meanings = "visible 1.37\_threshold 1.6\_small\_histo 	gram 1.6\_large\_histogram 2.25\_small\_histogram 2.25\_large\_histogram 11\_spatial\_co 	herence gross\_cloud thin\_cirrus medium\_high fog\_low\_stratus 11\_12\_view\_differenc 	e 3.7\_11\_view\_difference thermal\_histogram spare spare"<br><br>The "confidence\_in" field contains the "summary\_cloud\_mask" from the most appropriate cloud\_in flags; the value of the bit is 16384US<br><br>The "bayes\_in" field contains the "single\_moderate" probabilistic cloud flag; the value of the bit is 2UB|
|**2.6**|**Cloud Shadow**|Please see the cloud shadow part in the example provided in requirement 2.5|NA|
|**2.7**|**Snow/Ice Mask**|Please see the snow part in the example provided in requirement 2.5|NA|
|**2.8**|**Solar and Viewing Geometry**|NA|NA|


## Radiometric and Atmospheric Corrections

|**#**|**Item**|**Example 1**|**Example 2**|
| :-: | :-: | :-: | :-: |
|**3.1**|**Measurement**|NA|NA|
|**3.2**|**Corrections for Atmosphere (and Emissivity in the Case of ST)**|<p>NA</p><p></p>|NA|
|**3.3**|**Measurement Uncertainty**|NA|NA|

## Geometric Corrections

|**#**|**Item**|**Example 1**|**Example 2**|
| :-: | :-: | :-: | :-: |
|**4.1**|**Geometric Correction**|NA|NA|


